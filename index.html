<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Near Kits</title>
      <meta name="description" content="Nearkits, Nft Portfolio manager!">
      <meta name="image" content="https://nearkits.io/assets/images/logo-mini-white.png">
    <meta content="Nearkits, Nft Portfolio manager!" name="keywords">
      <meta name="author" content="Near-Kits">
      <meta property="og:type" content="website">
      <meta property="og:title" content="Near-Kits">
      <meta property="og:description" content="Nearkits, Nft Portfolio manager!">
      <meta property="og:image" content="https://nearkits.io/assets/images/logo-mini-white.png">
      
      <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="">
  <meta property="twitter:title" content="Near-Kits">
  <meta property="twitter:description" content="Nearkits, Nft Portfolio manager!">
  <meta property="twitter:image" content="https://nearkits.io/assets/images/logo-mini-white.png">
  
    <!-- Favicons -->
    <link href="https://nearkits.io/assets/images/logo-mini-black.png" rel="icon">
    <!--<link href="assets/https://nearkits.io/assets/images/apple-touch-icon.png" rel="apple-touch-icon">-->
  
    <!-- Favicons -->
    <link href="https://nearkits.io/assets/images/logo-mini-white.png" rel="icon">
    <!-- plugins:css -->
    <link rel="stylesheet" href="assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="assets/vendors/jvectormap/jquery-jvectormap.css">
    <link rel="stylesheet" href="assets/vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="assets/vendors/owl-carousel-2/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/vendors/owl-carousel-2/owl.theme.default.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="https://nearkits.io/assets/images/logo-mini-white.png" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>
        <link rel="stylesheet" href="assets/css/datatables.min.css">
    <link rel="stylesheet" href="assets/css/responsive.dataTables.min.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V8QFHPSX64"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V8QFHPSX64');
</script>
<style>
.dtr-modal-content{
        background-color: black;
}
div.dtr-modal div.dtr-modal-display {

    background-color: black!important;
    border: 1px solid white!important;
}
table.dataTable.dtr-inline.collapsed>tbody>tr[role="row"]>td:first-child:before, table.dataTable.dtr-inline.collapsed>tbody>tr[role="row"]>th:first-child:before {

    margin-top: 3px;
    background-color: black!important;
}
table.dataTable td, table.dataTable th {
    -webkit-box-sizing: content-box;
    box-sizing: content-box;
    background: black;
    color: white;
}
div.dtr-modal div.dtr-modal-close {
    width: 27px;
    height: 27px;
    color:black;
}
.sidebar.light {
    transition-timing-function: ease-in;
    background: #F1F0F0;
}
.content-wrapper.light{
    transition-timing-function: ease-in;
    background: white;
}
.navbar.light {
    transition-timing-function: ease-in;
    font-weight: normal;
    background: white;
}
.navbar .navbar-menu-wrapper .search input.light {
    transition-timing-function: ease-in;
    background: white;
}
.navbar .navbar-brand-wrapper.light{
    transition-timing-function: ease-in;
    background: white;
}
.card.light {
    transition-timing-function: ease-in;
    background-color: #F1F0F0;
}
.nav-link.light:hover, .nav-link.light:focus {
 background: white!important;
    
}
.sidebar .nav .nav-item.active > .nav-link.light {
    transition-timing-function: ease-in;
    background: white;
}
.sidebar .nav:not(.sub-menu) > .nav-item:hover:not(.nav-category):not(.account-dropdown) > .nav-link.light {
    transition-timing-function: ease-in;
     background: white;
}
.sidebar .sidebar-brand-wrapper.light {
    transition-timing-function: ease-in;
    background: #e3e3e3;
}
.form-control.light{
    transition-timing-function: ease-in;
    background: white;
}
.footer.light {
    transition-timing-function: ease-in;
    background: white;
}
.sidebar .nav .nav-item.active > .nav-link.light {
    transition-timing-function: ease-in;
        background: white;
        }
.navbar .navbar-menu-wrapper .navbar-nav .nav-item.dropdown .dropdown-menu.navbar-dropdown .dropdown-item.light {
    background: #F1F0F0;
}
.modal-content.light {

    background-color: #F1F0F0;
}
.dropdown-divider.light {
    border-top: 1px solid white;
}
.profile_div.light{
    background: white;
}
/* The switch - the box around the slider */
.switch {
  position: relative;
  display: inline-block;
  width: 30px;
  height: 17px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 13px;
  width: 13px;
  left: 2px;
  bottom: 2px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #000000;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(13px);
  -ms-transform: translateX(13px);
  transform: translateX(13px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 17px;
}

.slider.round:before {
  border-radius: 50%;
}

@media only screen and (min-width: 992px) {
    .sidebar {
        position: fixed;
    height: 100%;
    margin-right: 244px;
}
    .page-body-wrapper {

    margin-left: 244px;
}

}


</style>
  </head>
  <body>
    <div class="container-scroller">

      <!-- partial:partials/_sidebar.html -->
      <nav class="sidebar switch_theme sidebar-offcanvas" id="sidebar">
        <div class="sidebar-brand-wrapper switch_theme d-none d-lg-flex align-items-center justify-content-center fixed-top">
          <a class="sidebar-brand brand-logo" href="index.html"><img src="https://nearkits.io/assets/images/logo-new-tp-white.png" class="brand-logo-img" alt="logo" style="height: 100%;"/></a>
          <a class="sidebar-brand brand-logo-mini" href="index.html"><img  src="https://nearkits.io/assets/images/logo-mini-white.png" class="brand-logo-mini-img" alt="logo" /></a>
        </div>
        <ul class="nav">
          <li class="nav-item profile">
            <div class="profile-desc">
              <div class="profile-pic">
                <div class="count-indicator">
                  <span class="count bg-success"></span>
                </div>
                <div class="profile-name">
                  <h5 class="mb-0 font-weight-normal"></h5>
                </div>
              </div>
              <label class="switch">
  <input type="checkbox" checked id="switch_mode">
  <span class="slider round"></span>
</label>
            </div>
          </li>
          <li class="nav-item nav-category">
            <span class="nav-link">Navigation</span>
          </li>
          <li class="nav-item menu-items active" id="dashboard_nav">
            <a class="nav-link switch_theme light" href="#">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title text-white">Dashboard</span>
            </a>
          </li>
          <li class="nav-item menu-items" id="my_nfts_nav">
            <a class="nav-link switch_theme light" href="#my_nfts">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title text-white">My Nfts</span>
            </a>
          </li>
        </ul>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar switch_theme p-0 fixed-top d-flex flex-row">
          <div class="navbar-brand-wrapper switch_theme d-flex d-lg-none align-items-center justify-content-center">
            <a class="navbar-brand brand-logo-mini text-dark" href="index.html"><img class="img-fluid brand-logo-mini-img" src="assets/images/logo-mini-white.png" style="width: 35px;height: 35px;"></a>
          </div>
          <div class="navbar-menu-wrapper switch_theme flex-grow d-flex align-items-stretch">
            <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
              <span class="mdi mdi-menu"></span>
            </button>
            <ul class="navbar-nav w-100">
              <li class="nav-item w-100">
                <form class="nav-link mt-2 mt-md-0 d-none d-lg-flex search">
                  <input type="text" class="form-control switch_theme" placeholder="Search products">
                </form>
              </li>
            </ul>
            <ul class="navbar-nav navbar-nav-right">

              <li class="nav-item dropdown">
                <a class="nav-link" id="profileDropdown" href="#" data-bs-toggle="dropdown">
                  <div class="navbar-profile">
                    <button class="btn-sm btn-primary" id="Wallet"></button>
                    <p class="mb-0 d-none d-sm-block navbar-profile-name"></p>
                    <i class="mdi mdi-menu-down d-none d-sm-block"></i>
                  </div>
                </a>
                <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="profileDropdown">
                  <h6 class="p-3 mb-0 switch_theme profile_div text-dark">Profile</h6>
                  <div class="dropdown-divider switch_theme"></div>
                  <div class="dropdown-divider switch_theme"></div>
                  <a class="dropdown-item preview-item switch_theme">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-dark rounded-circle">
                        <i class="mdi mdi-logout text-danger"></i>
                      </div>
                    </div>
                    <div class="preview-item-content" id="logout">
                      <p class="preview-subject text-white mb-1">Log out</p>
                    </div>
                  </a>
              </li>
            </ul>
            <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
              <span class="mdi mdi-format-line-spacing"></span>
            </button>
          </div>
        </nav>
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper switch_theme">
              <div id="dashboard_display" class="">
              <div class="row">
                    <div class="col-xl-9 col-sm-12 grid-margin stretch-card">
                    <div class="card switch_theme">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-12">
                            <div class="d-flex align-items-center align-self-start">
                              <div class="col-12">
<form class="search_account_form">
      <div class="input-group mb-2">
        
        <input type="text" class="form-control switch_theme text-dark" id="search_account" placeholder="Near Account">
        <div class="input-group-prepend">
          <div class="input-group-text search_account_btn" style="cursor:pointer"><i class="mdi mdi-magnify text-muted"></i></div>
        </div>
      </div>
      </form>
    </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <!-- <div class="icon icon-box-success ">
                              <span class="mdi mdi-arrow-top-right icon-item"></span>
                            </div> -->
                          </div>
                        </div>
                        <h6 class="text-muted font-weight-normal">Search Near account</h6>
                      </div>
                    </div>
                  </div>
              </div>
               <center>
          <div class="vertical-center ">
                   <div class="progress mt-3 w-100" style="width:200px; height:8px; display:none;">
  <div class="progress-bar" style="width:10%; display:none;"></div>
</div>
            </div>
    </center>
            <div class="row d-none" id="display_account_info">
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card switch_theme">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-12">
                            <div class="d-block align-items-center align-self-start">
                              <h3 id="total_value" class="mb-0 reload_divs text-dark"><img class="col align-self-center img-fluid" style="height:60px; width:60px" src="https://nearkits.io/assets/images/loading.gif"></h3>
                               <div class="text-dark ml-auto mt-2 font-weight-medium usd_show" id="usd_near_total"></div> 
                            </div>
                          </div>
                          <div class=" d-flex justify-content-end">
                            
                          </div>
                        </div>
                        <h6 class="text-muted font-weight-normal">Total Account Value</h6>
                      </div>
                    </div>
                  </div>
              <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card switch_theme">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-12">
                        <div class="d-block align-items-center align-self-start">
                          <h3 id="total_floor" class="mb-0 reload_divs text-dark"><img class="col align-self-center img-fluid" style="height:60px; width:60px" src="https://nearkits.io/assets/images/loading.gif"></h3>
                        <div class="text-dark ml-auto mt-2 font-weight-medium usd_show" id="usd_near_floor"></div> 
                        </div>
                      </div>
                      <div class="">
                        <!-- <div class="icon icon-box-success ">
                          <span class="mdi mdi-arrow-top-right icon-item"></span>
                        </div> -->
                      </div>
                    </div>
                    <h6 class="text-muted font-weight-normal">Total Floor Price</h6>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card switch_theme">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-12">
                        <div class="d-block align-items-center align-self-start">
                          <h3 id="liquid_near" class="mb-0 reload_divs text-dark"><img class="col align-self-center img-fluid" style="height:60px; width:60px" src="https://nearkits.io/assets/images/loading.gif"></h3>
                         <div class="text-dark ml-auto mt-2 font-weight-medium usd_show" id="usd_near_liquid"></div> 
                        </div>
                      </div>
                      <div class="">
                        <!-- <div class="icon icon-box-success ">
                          <span class="mdi mdi-arrow-top-right icon-item"></span>
                        </div> -->
                      </div>
                    </div>
                    <h6 class="text-muted font-weight-normal">Liquid Near</h6>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card switch_theme">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-12">
                        <div class="d-block align-items-center align-self-start">
                          <h3 id="staked_near" class="mb-0 reload_divs text-dark"><img class="col align-self-center img-fluid" style="height:60px; width:60px" src="https://nearkits.io/assets/images/loading.gif"></h3>
                         <div class="text-dark ml-auto mt-2 font-weight-medium usd_show" id="usd_near_staked"></div> 
                        </div>
                      </div>
                      <div class="">
                        <!-- <div class="icon icon-box-success ">
                          <span class="mdi mdi-arrow-top-right icon-item"></span>
                        </div> -->
                      </div>
                    </div>
                    <h6 class="text-muted font-weight-normal">Validator Staked Near</h6>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="row">
              <div class="col-md-4 grid-margin stretch-card">
                <div class="card switch_theme">
                  <div class="card-body">
                    <h4 class="card-title">Transaction History</h4>
                    <canvas id="transaction-history" class="transaction-chart"></canvas>
                    <div class="bg-gray-dark d-flex d-md-block d-xl-flex flex-row py-3 px-4 px-md-3 px-xl-4 rounded mt-3">
                      <div class="text-md-center text-xl-left">
                        <h6 class="mb-1">Transfer to coming soon</h6>
                        <p class="text-muted mb-0">07 Jan 2019, 09:12AM</p>
                      </div>
                      <div class="align-self-center flex-grow text-right text-md-center text-xl-right py-md-2 py-xl-0">
                        <h6 class="font-weight-bold mb-0">$236</h6>
                      </div>
                    </div>
                    <div class="bg-gray-dark d-flex d-md-block d-xl-flex flex-row py-3 px-4 px-md-3 px-xl-4 rounded mt-3">
                      <div class="text-md-center text-xl-left">
                        <h6 class="mb-1">Tranfer to ycrydev.near</h6>
                        <p class="text-muted mb-0">07 Jan 2019, 09:12AM</p>
                      </div>
                      <div class="align-self-center flex-grow text-right text-md-center text-xl-right py-md-2 py-xl-0">
                        <h6 class="font-weight-bold mb-0">$593</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
            </div> -->
            <p>Displaying <span id="nfts_count"></span> out of <span id="total_nft_count"></span></p>
            <div class="row" id="display_nfts">
            
                </div>
                <input type="hidden" id="totalPages">
                  <div id="pagination"></div>
                  </div>
                  
                   <div id="my_nfts_display" class="">
                       <div class="row">
                    <div class="col-xl-9 col-sm-12 grid-margin stretch-card">
                    <div class="card switch_theme">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-12">
                            <div class="d-flex align-items-center align-self-start">
                              <div class="col-12">
<form class="search_nft_form">
      <div class="input-group mb-2">
        
        <input type="text" class="form-control switch_theme text-dark" id="search_nft_collection" placeholder="Serach Nft collection">
        <div class="input-group-prepend">
          <div class="input-group-text search_account_btn" style="cursor:pointer"><i class="mdi mdi-magnify text-muted"></i></div>
        </div>
      </div>
      </form>
    </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <!-- <div class="icon icon-box-success ">
                              <span class="mdi mdi-arrow-top-right icon-item"></span>
                            </div> -->
                          </div>
                        </div>
                        <h6 class="text-muted font-weight-normal">Search Nft Collection</h6>
                      </div>
                    </div>
                  </div>
              </div>
                       <div id="load_my_nfts"></div>
                       <div id="search_load_my_nfts" class="d-none"></div>
                       
                  </div>
                  <div id="collection_activities_display" class="d-none">
                      <span id="recent_activity"></span>
                        <table id="collection_activities" class="table display nowrap w-100">
                                    <thead>
                                        <tr style="background: #f5f5f5;">
                                            <td class="pname">
                                            NFT
                                            </td>
                                            <td>Time</td>
                                            <td>Price</td>
                                           <td>From</td>
                                            <td>To</td>
                                        </tr>
                                    </thead>
                                    <!--                                                             <tbody></tbody>-->
                                    <!--                               <tfoot>-->
                                    <!-- <tr>-->
                                    <!--  <th colspan="3">Total</th>-->
                                    <!--  <th id="total_order"></th>-->
                                    <!-- </tr>-->
                                    <!--</tfoot>-->
                                </table>
                  </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer switch_theme">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
                 <span style="font-size: 20px;" class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"><a href="https://twitter.com/NearKits_io"><i class="mdi mdi-twitter text-muted"></i></a><a href="https://discord.gg/7bkeCCZ2u3"><i class="mdi mdi-discord text-muted"></i></a> </span>
                 
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © NearKits </span>
             
            </div>
          </footer>
          <div class="modal fade " id="nft_transfer" tabindex="-1" role="dialog" aria-labelledby="transfer_address_label" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content switch_theme">
      <div class="modal-header">
        <h5 class="modal-title text-white" id="transfer_address_label">Transfer Nft</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form class="transfer_form">
      <div class="modal-body">
        <div class="form-group">
        <label for="transfer_address"></label>
        <input type="text" class="form-control switch_theme text-dark" id="transfer_address" aria-describedby="transfer_help" placeholder="Enter Address">
        <small id="transfer_help" class="form-text text-muted">Make sure the receiver has enough near for storage!</small>
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary transfer_nft_btn">Transfer</button>
      </div>
      </form>
    </div>
  </div>
</div>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="assets/js/simple-bootstrap-paginator.min.js"></script>

    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="assets/vendors/chart.js/Chart.min.js"></script>
    <script src="assets/vendors/progressbar.js/progressbar.min.js"></script>
    <script src="assets/vendors/jvectormap/jquery-jvectormap.min.js"></script>
    <script src="assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="assets/vendors/owl-carousel-2/owl.carousel.min.js"></script>
    <script src="assets/js/jquery.cookie.js" type="text/javascript"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="assets/js/off-canvas.js"></script>
    <script src="assets/js/hoverable-collapse.js"></script>
    <script src="assets/js/misc.js"></script>
    <script src="assets/js/settings.js"></script>
    <script src="assets/js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <script src="assets/js/dashboard.js"></script>
     <script src="assets/js/datatables.min.js"></script>
    <script src="assets/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/near-api-js@0.41.0/dist/near-api-js.min.js"></script>
    <script>
    mode_selected_function()
    let nft_array = []
    $("#switch_mode").on("click",function(){
    if($('#switch_mode').is(':checked')){
        mode_selected = "dark"
        
    }else{
     
        mode_selected = "light"
    }
    localStorage.setItem("mode_selected", mode_selected);
     mode_selected_function()
    })
     function mode_selected_function(){
    mode_selected = localStorage.getItem("mode_selected");
    if (mode_selected == "light"){
           $('#switch_mode').removeAttr("checked")
        $(".text-white").addClass("text-dark")
        $(".text-dark").removeClass("text-white")
        
        $(".switch_theme").addClass("light")
        $(".brand-logo-mini-img").attr("src","assets/images/logo-mini-black.png")
        $(".brand-logo-img").attr("src","assets/images/logo-new-tp-black.png")
    }else{
        $('#switch_mode').attr("checked")
         $(".switch_theme").removeClass("light")
         $(".text-dark").addClass("text-white")
         $(".text-white").removeClass("text-dark")
         
         $(".brand-logo-mini-img").attr("src","assets/images/logo-mini-white.png")
         $(".brand-logo-img").attr("src","assets/images/logo-new-tp-white.png")
    }
    }
      const near = new nearApi.Near({
        keyStore: new nearApi.keyStores.BrowserLocalStorageKeyStore(),
        networkId: 'mainnet',
        nodeUrl: 'https://rpc.mainnet.near.org',
        walletUrl: 'https://wallet.mainnet.near.org'
      });
     
      // connect to the NEAR Wallet
      const wallet = new nearApi.WalletConnection(near, 'Near Kits');
        
  
      const button = document.getElementById('Wallet');
      if (!wallet.isSignedIn()) {
        button.textContent = 'Sign with NEAR'
      }
      
      $(document).on('click','.transfer_nft',function() {
         token_id = $(this).attr("value")
          contract_id_send = $(this).attr("contract_id")
            collection_name = $(this).attr("collection_name")
            
        
     })
       $(document).on("submit",".transfer_form",function(e){
           e.preventDefault()
           transfer_address = $("#transfer_address").val().toLowerCase();
           if(transfer_address.includes(".near") || transfer_address.length == 64){
           transfer_nfts(contract_id_send,token_id,transfer_address)
           }else{
               toastr.warning('Invalid account address ser!')
           }
       })
       $(".search_account_form").on("submit",function(e){
           e.preventDefault()
           $(".usd_show").html("")
           account_type = ""
           $(".reload_divs").html('<img class="col align-self-center img-fluid" style="height:60px; width:60px" src="https://nearkits.io/assets/images/loading.gif">')
           $("#display_account_info").removeClass("d-none")
            account_id = $("#search_account").val().toLowerCase();
            if(account_id.includes(".near") || account_id.length == 64){
            get_total_floor(account_id)
           load_nft(account_id)

            }else{
               toastr.warning('Invalid account address ser!') 
            }
           
       })
      $("#logout").on("click",function(){
        wallet.signOut();
        location.reload();
      })
      $("#wallet").on("click",function(){
         $("#display_account_info").removeClass("d-none")
         account_id = wallet._authData.accountId
         get_total_floor(account_id)
         load_nft(account_id)
         $('#Wallet').html(wallet._authData.accountId);

      })
      account_type=""
      if (wallet.isSignedIn()) {
          $("#display_account_info").removeClass("d-none")
          account_type ="signed_in"
         account_id = wallet._authData.accountId
        get_total_floor(account_id)
           load_nft(account_id)
         $('#Wallet').html(wallet._authData.accountId);

      }else{
          toastr.info('Connect your wallet ser!')
      }
      // Either sign in or call the addMessage change method on button click
      document.getElementById('Wallet').addEventListener('click', () => {
        if (wallet.isSignedIn()) {
             account_type ="signed_in"
            button.textContent = wallet._authData.accountId
             get_total_floor(account_id)
            load_nft(account_id)
          
         
        } else {
          wallet.requestSignIn(
              "nearkits.near",
      "Near Kits", // optional
      "https://nearkits.io", // optional
      "https://nearkits.io"
          );
          $(".navbar-profile-name").html(wallet.accountId)
          load_nft()
          console.log(wallet.accountId)
         
        }
      });
        function loading_bar(){
            $('.progress-bar').css('width', '0%');
        $('.progress').fadeIn();
        $('.progress-bar').fadeIn();
        
        setTimeout(function() {
        $('.progress-bar').css('width', '30%');
            setTimeout(function() {
            $('.progress-bar').css('width', '40%');
                setTimeout(function() {
                $('.progress-bar').css('width', '50%');
                    setTimeout(function() {
                        $('.progress-bar').css('width', '60%');
                        setTimeout(function() {
                            $('.progress-bar').css('width', '75%');
                            setTimeout(function() {
                            $('.progress-bar').css('width', '90%');
                                setTimeout(function() {
                                $('.progress-bar').css('width', '95%');
                             },15000)
                         },7000)
                        },5000)
                    },5000)
                },3000)
            },4000)
        },2000)
        
        }
       async function transfer_nfts(contract_id,token_id){
           try{
            const contract = await new nearApi.Contract(
			wallet.account(),
			contract_id,
			{
				changeMethods: [
					'nft_transfer'
				],
			}
				)
			const formattedParams = {
				token_id:token_id,
				receiver_id:transfer_address,
				
		}
	
			const ret = await contract.nft_transfer(
			formattedParams,
			300000000000000,
			"1"
		)

           }catch(error){
               toastr.warning("this nft can't be transferred") 
           }
		
        }
   
        function load_nft(account_id){
            search_title = ""
            $('#pagination').removeData()
                 $('#pagination').removeClass("d-none")
                $.ajax({
                    type: "POST",
                    url: "https://nearkits.io/php/get_nft_pages.php",
                    data: {
                        account_id: account_id
                    },
                    success: function(response) {
                        if (response > 0) {
                            $("#totalPages").attr("value", response)
                            var totalPage = response
                            var totalPage = parseInt($('#totalPages').val());
                            var pag = $('#pagination').simplePaginator({
                                totalPages: totalPage,
                                maxButtonsVisible: 5,
                                currentPage: 1,
                                nextLabel: 'Next',
                                prevLabel: 'Prev',
                                firstLabel: 'First',
                                lastLabel: 'Last',
                                clickCurrentPage: true,
                                pageChange: function(page) {
                                    $("#display_nfts").html('<center><div class="row" style="height:400px;"><img class="col align-self-center" style="max-height:140px; max-width:140px; margin-left:auto; margin-right:auto;" src="https://nearkits.io/assets/images/loading.gif"></div></center>');
                                    $.ajax({
                                        url: "https://nearkits.io/php/get_nfts.php",
                                        method: "POST",
                                        dataType: "json",
                                        data: {
                                            page: page,
                                            account_type:account_type,
                                            account_id: account_id,
                                            mode_selected:mode_selected
                                        },
                                        success: function(responseData) {
                                            $('#display_nfts').html(responseData.html);
                                            mode_selected_function()
                                            $('#nfts_count').html(responseData.nfts_count);
                                    }
                                    });
                                }
                            });
                        } else {
                            $("#display_nfts").html("<div class='text-center'><h6>You have no Nfts yet!</h6></div>");
                            start(0,account_id)
                              $('#nfts_count').html("0");
                                $('#pagination').addClass("d-none")
                        }
                    }
                });
        }
        async function start(total_floor_display,account_id){
           try{
              await $.ajax({
                    type: "GET",
                    url: "https://api.coingecko.com/api/v3/simple/price?ids=NEAR&vs_currencies=USD",
                    dataType: "json",
                    success: function(response) {
                       near_usd = response.near.usd
                    }
              })
             // gets account balance
            const account = await near.account(account_id);
            balance = await account.getAccountBalance();
            $('#total_floor').html((total_floor_display).toLocaleString()+" Ⓝ");
            $("#usd_near_floor").html("≈ $"+(parseFloat((total_floor_display.toFixed(2)*parseFloat(near_usd)).toFixed(2))).toLocaleString())
            
            total_balance_raw = balance.available/1000000000000000000000000
            total_balance = parseFloat(total_balance_raw.toFixed(2));
            
            $('#liquid_near').html((total_balance).toLocaleString()+" Ⓝ");
             $("#usd_near_liquid").html("≈ $"+(parseFloat((total_balance.toFixed(2)*parseFloat(near_usd)).toFixed(2))).toLocaleString())
             
            staked_balance= balance.staked/1000000000000000000000000
            $('#staked_near').html((staked_balance).toLocaleString()+" Ⓝ");
             $("#usd_near_staked").html("≈ $"+(parseFloat((staked_balance.toFixed(2)*parseFloat(near_usd)).toFixed(2))).toLocaleString())
             
            total_value = parseFloat(total_balance) + parseFloat(total_floor_display) +parseFloat(staked_balance)
            $('#total_value').html((total_value.toFixed(2).toLocaleString())+" Ⓝ");
            $("#usd_near_total").html("≈ $"+(parseFloat((total_value.toFixed(2)*parseFloat(near_usd)).toFixed(2))).toLocaleString())
            $('.progress-bar').css('width', '0%');
             $('.progress-bar').fadeOut();
            $('.progress').fadeOut();
           } catch (error) {
                 toastr.warning('Invalid account address ser!') 
                  $('.progress-bar').fadeOut();
            $('.progress').fadeOut();
  }
         }
         function get_total_floor(account_id){
              loading_bar()
              $.ajax({
                    type: "POST",
                    url: "https://nearkits.io/php/get_floor_price.php",
                    dataType: "json",
                    data: {
                        account_id: account_id
                    },
                    success: function(response) {
                    total_floor_display = parseFloat(response.total_floor)
                    if(response.total_nft_count < 2){
                    $("#total_nft_count").html(response.total_nft_count+" Nft");
                    }else{
                    $("#total_nft_count").html(response.total_nft_count+" Nfts");
                    }
                                start(total_floor_display,account_id)  
                    }
              })
             
         }
             $(document).on('click','.view_collection_activtiy',function() {
                 collection_id = $(this).attr("collection_id")
                 collection_name = $(this).attr("collection")
                 localStorage.setItem("collection_id", collection_id);
                 localStorage.setItem("collection_name", collection_name);
                 load_activity()
             })
            $(window).bind('hashchange', function() {
              load_window_hash()
                        });
            window.onhashchange = function() { 
                load_window_hash()  
                }
                load_window_hash()  
            function load_window_hash(){
                if(window.location.hash==="#activity"){
                    $('#collection_activities').DataTable().destroy();
                    load_activity()
                }else if(window.location.hash==="#my_nfts"){
                    $('#collection_activities').addClass("d-none")
                    $("#dashboard_nav").removeClass("active")
                    $("#my_nfts_nav").addClass("active")
                    $("#my_nfts_display").removeClass("d-none")
                    $("#dashboard_display").addClass("d-none")
                }else{
                    $('#collection_activities').addClass("d-none")
                    $("#dashboard_nav").addClass("active")
                     $("#my_nfts_nav").removeClass("active")
                     $("#dashboard_display").removeClass("d-none")
                 $("#collection_activities_display").addClass("d-none")
                 $("#my_nfts_display").addClass("d-none")
                }
                }
         function load_activity(){
             $('#collection_activities').DataTable().destroy();
              $("#dashboard_display").addClass("d-none")
              collection_name = localStorage.getItem("collection_name");
              token_series = localStorage.getItem("token_series");
              $("#recent_activity").html("Recent activity from "+collection_name)
                 $("#collection_activities_display").removeClass("d-none")
             collection_id = localStorage.getItem("collection_id");
         sort_by=""

         
           var dataTable = $('#collection_activities').DataTable({
                          responsive: {
            details: {
                display: $.fn.dataTable.Responsive.display.modal( {
                    header: function ( row ) {
                        var data = row.data();
                        return 'Details for '+data[0]+' '+data[1];
                    }
                } ),
                renderer: $.fn.dataTable.Responsive.renderer.tableAll( {
                    tableClass: 'table'
                } )
            }
        },
                            "processing": true,
                            "serverSide": true,
                            "order": [],
                            "ajax": {
                                url: "php/get_activities.php",
                                type: "POST",
                                data: {
                                    collection_id: collection_id,
                                    sort_by: sort_by
                                }
                            },
                            "columnDefs": [{
                                "targets": [0, 1, 2, 3],
                                "orderable": false,
                            }, ],
                        });
                        $("#collection_activities_length").addClass("d-none")
                        $("#collection_activities_filter").addClass("d-none")
                        $("#collection_activities_info").addClass("d-none")
         }
         my_nfts_display()
         function my_nfts_display(){
               $.ajax({
                    type: "GET",
                    url: "https://helper.mainnet.near.org/account/"+account_id+"/likelyNFTs",
                    data: {
                        account_id: account_id
                    },
                    success: function(response) {
                        check_has_nfts(response)
                        return nft_array
                    }
              })
         }

search_nft_array = []
contract_id_array_input = []
var nft_object_array = [];
search_nft_bool = false
 $(".search_nft_form").on("submit",function(e){
           e.preventDefault()

           search_nft_array = []
             toSearch  = $("#search_nft_collection").val().toUpperCase()
             if(!(toSearch=="")){
for(var i=0; i<nft_object_array.length; i++) {
  for(key in nft_object_array[i]) {
    if(nft_object_array[i][key].indexOf(toSearch)!=-1) {
      search_nft_array.push(nft_object_array[i]);
    }
  }
}
}else{
  search_nft_array =   nft_object_array
}

contract_id_array_search=[]
search_nft_array.forEach((element, index, array) => {
        contract_id_array_search.push(element.contract_id)
    })
search_has_nfts(contract_id_array_search)

       })

        async function check_has_nfts(contract_id_array){
          $("#load_my_nfts").html("")
               for(i in contract_id_array){
                 contract_id = contract_id_array[i]
            const contract = new nearApi.Contract(
  wallet.account(), // the account object that is connecting
  contract_id,
  {
    viewMethods: ['nft_tokens_for_owner','nft_metadata']
  }
  )
  try{
  	const response = await contract.nft_tokens_for_owner({ account_id: account_id });
  	if (response.length>0){
  	    response
  	    const response_metadata =await contract.nft_metadata(); 
  	 //   search_nft_array.push(response_metadata.name)
  	    contract_id_array_input.push(contract_id)
  	    nft_title = response_metadata.name.toUpperCase()
  	    nft_object_array.push({contract_id: contract_id, nft_title: nft_title});
  	    
  	    load_nft_top = '<h4 class="text-white">'+response_metadata.name+'</h4><div class="row">'
  	    load_nft_list = ''
  	    for(i in response){
  	    load_nft_native =`
  	       <div class="col-6 col-sm-4 col-md-3 col-xl-3 grid-margin stretch-card">
  	          <div class="card switch_theme">
  	            <img class="card-img-top img-fluid" src="${response_metadata.base_uri+'/'+response[i].metadata.media}"  style="width: 100%;
    object-fit: contain;" alt="">
  	    <div class="card-footer">
                        <h4 class="card-title text-dark mb-0">${response[i].metadata.title}</h4>
                          
                        <div class="d-flex py-4">
                          <div class="preview-list w-100">
                            <div class="preview-item p-0">
                              <div class="preview-item-content d-flex flex-grow">
                                <div class="flex-grow">
                                 
                                  <h3 class="text-white"><a class="text-white" href="#"></a></h3>
                                  <div class="d-flex justify-content-end">
                                 <button class="btn btn-primary transfer_nft" value="${response[i].token_id}" contract_id="${contract_id}" collection_name="${response_metadata.name}"  data-toggle="modal" data-target="#nft_transfer">Transfer</button></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                     </div>
                 
  	    `;
  	    load_nft_list = load_nft_list+load_nft_native
  	    }
  	    load_nft_bottom = '</div>'
  	    $("#load_my_nfts").append(load_nft_top+load_nft_list+load_nft_bottom)
  	    if($("#search_load_my_nfts").hasClass("d-none")){
  	    $("#load_my_nfts").removeClass("d-none")
  	    $("#search_load_my_nfts").addClass("d-none")
  	    }else{
  	         $("#load_my_nfts").addClass("d-none")
  	    $("#search_load_my_nfts").removeClass("d-none")
  	    }
  	    mode_selected_function()
  	   
  	}
  }catch(error){
      
  }
               }
        }
async function search_has_nfts(contract_id_array){
    $("#search_load_my_nfts").html('<center class="reload_remove"><div class="row" style="height:400px;"><img class="col align-self-center" style="max-height:140px; max-width:140px; margin-left:auto; margin-right:auto;" src="https://nearkits.io/assets/images/loading.gif"></div></center>');
    $("#search_load_my_nfts").removeClass("d-none")
    $("#load_my_nfts").addClass("d-none")
   if (contract_id_array.length>0){
               for(i in contract_id_array){
                 contract_id_search = contract_id_array[i]
            const contract_search = new nearApi.Contract(
  wallet.account(), // the account object that is connecting
  contract_id_search,
  {
    viewMethods: ['nft_tokens_for_owner','nft_metadata']
  }
  )
  try{
  	const response_search = await contract_search.nft_tokens_for_owner({ account_id: account_id });
  	if (response_search.length>0){
  	    
  	     response_search_metadata =await contract_search.nft_metadata(); 
  	    
  	 //   search_nft_array.push(response_search_metadata.name)
  	    load_search_nft_top = '<h4 class="text-white">'+response_search_metadata.name+'</h4><div class="row">'
  	    load_search_nft_list = ''
  	    for(i in response_search){
  	    load_search_nft =`
  	       <div class="col-6 col-sm-4 col-md-3 col-xl-3 grid-margin stretch-card">
  	          <div class="card switch_theme">
  	            <img class="card-img-top img-fluid" src="${response_search_metadata.base_uri+'/'+response_search[i].metadata.media}"  style="width: 100%;
    object-fit: contain;" alt="">
  	    <div class="card-footer">
                        <h4 class="card-title text-dark mb-0">${response_search[i].metadata.title}</h4>
                          
                        <div class="d-flex py-4">
                          <div class="preview-list w-100">
                            <div class="preview-item p-0">
                              <div class="preview-item-content d-flex flex-grow">
                                <div class="flex-grow">
                                 
                                  <h3 class="text-white"><a class="text-white" href="#"></a></h3>
                                  <div class="d-flex justify-content-end">
                                 <button class="btn btn-primary transfer_nft" value="${response_search[i].token_id}" contract_id="${contract_id_search}" collection_name="${response_search_metadata.name}"  data-toggle="modal" data-target="#nft_transfer">Transfer</button></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                     </div>
                 
  	    `;
  	    load_search_nft_list = load_search_nft_list+load_search_nft
  	    }
  	    load_search_nft_bottom = '</div>'
  	    $("center").remove(".reload_remove")
  	         $("#search_load_my_nfts").append(load_search_nft_top+load_search_nft_list+load_search_nft_bottom)
  	         $("#load_my_nfts").addClass("d-none")
  	         $("#search_load_my_nfts").removeClass("d-none")
  	    mode_selected_function()
  	    
  	}else{
  	    	$("#search_load_my_nfts").html("<div class='text-center'><h6>This collection isn't in your wallet!</h6></div>");
  	}
  
  }catch(error){
      
  }
               }
   }else{
       	$("#search_load_my_nfts").html("<div class='text-center text-dark'><h6>This collection isn't in your wallet!</h6></div>");
   }
        }
        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/near-api-js@0.41.0/dist/near-api-js.min.js"></script>
  
    <script>
     
    </script>
    <!-- End custom js for this page -->
  </body>
</html>